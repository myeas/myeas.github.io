---
title: 绿色安装金蝶EAS系统
date: 2022-02-23 00:00:00
permalink: /pages/abc-811002/
private: true     # 开启文章私密，必须
categories:
  - 系统安装
tags:
  - 系统安装
---

# 绿色安装金蝶EAS系统

::: note 快速查找小技巧

- 您可以通过顶部搜索框，搜索需要的内容，并快速定位和链接到相应的内容；
- 您可以通过顶部导航、左侧导航（如有），快速定位到需要的章节；
- 您可以通过右侧导航（如有），快速定位到本章节的小节主题；
- 您可以通过 CTRL + F 搜索关键词，快速定位到本章节的具体内容处；
- 您如果发现本章节的错误、或有不明白的地方，可以通过[QQ群](https://jq.qq.com/?_wv=1027&k=Y6HPvi87)进行反馈。

:::

**本章节目录**：

[[TOC]]

## 1.应用场景

以下场景适合绿色安装：

- 本机有EAS客户端，但重装了系统，不知如何打开原有的EAS客户端
- 本机有EAS客户端，但EAS服务器的地址或端口变了，不知如何配置
- 本机有EAS客户端，但需要从一个目录迁移到别的目录，如E:\迁到D:\，又如D:\Kingdee\EAS86迁到D:\Kingdee
- 本地没有EAS客户端，但其他电脑有EAS客户端

绿色安装，适合网速较慢时安装，或需要快速安装，或系统管理员需要同时给多个电脑安装客户端，这样相对全新安装，要快速。



## 2.认知准备

以笔者的EAS安装目录为例：

**安装目录及执行文件、配件文件**：

:::center

![](/easpublic/easimg/eassetup.png)

:::

**1.安装目录**

如上图所示：`D:\Kingdee\EAS86`为安装目录，即`\client\bin\`前面的为安装目录；

**2.配置目录**

如上图所示：`D:\Kingdee\EAS86\clent\bin`为配置目录

**3.执行文件（或叫入口文件）**

如上图所示：`client.bat`为执行文件或入口文件，双击即可打开EAS客户端

图中所示，没有显示扩展名`.bat`，这是因为系统自动隐藏了，看到`类型`为`Windows批处理文件`的文件，即为`.bat`文件。

**4.配置文件**

如上图所示：

- `set-client-env.bat`为非图形化配置文件，在配置正确后，以后就可以不用动。该文件以`右击-编辑`的方式打开。

- `set-url.bat`为图形化配置文件，在配置正确后，以后就可以不用动。该文件以`右击-以管理员身份运行`的方式打开。

## 3.找到EAS安装目录，复制或剪切

**1.本地有EAS，且桌面有快捷方式**

右击桌面EAS客户端的快捷方式，单击`打开文件所在的位置`（如右键菜单中没有`打开文件所在的位置`，则点属性，再单击`打开文件所在的位置`），则自动跳转到配置目录，再往上找上级目录，一直找到`client`目录的上级目录，则为安装目录，一般为`eas`（笔者因为有多个EAS客户端，所以把默认`eas`的改成了`EAS86`，大家可以不用改）

如：**D:\kingdee**\client\bin，则`D:\kingdee`为安装目录

如：**D:\kingdee\eas**\client\bin，则`D:\kingdee\eas`为安装目录

**2.本地有EAS，且桌面没有快捷方式**

进入各盘，找到类似`kingdee`或`eas`字样的目录，进入该目录，看到该目录下级有`client`目录和`clientjdk`（及或`oracle_jdk1.8`）目录，即说明找到了安装目录。

**3.本地没有EAS，参考1和2，在其他同事的电脑上找到安装目录**

参考1或2

**4.复制或剪切安装目录**

本地电脑，则剪切安装目录；

从其他同事的电脑上，则复制安装目录到U盘，再从U盘复制到本地。

把这个安装目录复制或剪切到盘符根目录，或放在kingdee目录下。

如果原始客户端是压缩包文件，在复制或剪切到本地后，解压时，一定要点击类似`解压到XXX`这样的菜单，一般不要点击`解压到当前文件夹`。

示例：

- 或从D:\金蝶程序\EAS86，剪切到D:\EAS86
- 或从D:\kingdee\eas，剪切到E:\kingdee\eas
- 或从D:\EAS86\EAS86，剪切到D:\EAS86
- 或从D:\EAS86\EAS86，剪切到E:\EAS86，并改名称为eas，即E:\eas

万变不离其宗，我们要做的就是把`client`目录和`clientjdk`目录的上级目录（一般为`eas`），复制或剪切到想放置的目录下。可以在根目录下，也可以在kingdee或其它英文名的目录下，但**不要超过两级目录、目录名不要有空格、目录名不要有中文**。

复制或剪切好之后，记住这个安装目录。



## 4.设置配置文件set-client-env.bat

**1.进入配置目录**

进入安装目录，再进入`\client\bin`，即进入配置文件所在目录

**2.设置配置文件**

找到配置文件`set-client-env.bat`，右击该文件，再单击`编辑`（注意不是直接双击，`.bat`文件必须这样才能编辑）

找到类似如下位置：

::: warning 配置文件

SET EAS_HOME=`D:\Kingdee\EAS86`

SET JAVA_HOME=`D:\Kingdee\EAS86`\oracle_jdk1.8

把安装路径`D:\Kingdee\EAS86`改成您本地放置的位置，比如您放置在`D:\eas`,则把这两行颜色部分改成`D:\eas`。

:::

修改后，保存配置文件。



## 5.设置配置文件set-url.bat

**1.进入配置目录**

进入安装目录，再进入`\client\bin`，即进入配置文件所在目录

**2.设置图形化配置文件**

找到图形化配置文件`set-url.bat`，右击该文件，再单击`以管理员身份运行`（注意win7以上操作系统不是直接双击，直接双击是无法打开的；XP系统可直接双击），如下图所示：

![](/easpublic/easimg/easseturl-ssl.png)

按本部提供的信息，修改`RPC协议`，`服务器地址`、`服务器端口`、`文件更新服务端口`等，【保存】。

特别提醒：如果您的电脑操作系统是32位的，请不要选择`JDK1.8`，请选择`JDK1.6`。

<!--
## 6. 修改执行文件client.bat

临时方式：

- 找到桌面金蝶EAS系统的快捷方式，选中并右击，点击`打开文件所有的位置`；

- 会自动进入到`bin`文件夹，找到`client.bat`；

  如隐藏了扩展名，则看不到`.bat`，则请找到`client`，且是齿轮图标；

- 选中`client.bat`，并右击，点击`编辑`（如果是win11，需要点击`显示更多选项`再点编辑），则当前会以记事本的方式打开执行文件，请先在记事本的菜单中找到`自动换行`，并点击，里面的所有内容就会自动换行，方便查阅；
- 往下拉到最下，找到`30000`的字样（**有两处**），把这两处均修改为`900000`，即90万，再保存。

如后续能实现自动方式修改如上数据，则不用操作本小节各步骤。

后续实现后，另行告之。

-->

通过上述<4>、<5>，设置后，双击打开桌面快捷方式，或双击执行文件`client.bat`，即可正常登录EAS客户端。

## 6.设置桌面快捷方式

**1.发送入口文件快捷方式到桌面**

在配置目录，找到并选中`client.bat`，**右击**，再单击`发送到-桌面快捷方式`，则桌面即刻就有了入口文件的快捷方式，在桌面上双击快捷方式，即可打开EAS客户端

**2.设置桌面快捷方式图标**

找到桌面上快捷方式，右击，再单击重命名，修改为自己好记的名称，比如修改为`金蝶EAS`。

继续右击，属性，更改图标，浏览，找到配置目录（比如笔者为`D:\Kingdee\EAS86\clent\bin`）中的`client.ico`，选中，打开，确定，确定，即可完成桌面快捷方式的图标设定。

:::center

![](/easpublic/easimg/eassetup3.png)

:::



## 7.安装多个EAS客户端

EAS客户端是支持绿色运行的（即无需安装仅需要修改配置文件即可使用客户端），理论上一台电脑上支持无数个客户端运行。

当一台电脑需要再安装一个客户端时（比如一个生产环境，一个测试环境），请参照如下方法：



**1.复制安装目录并粘贴到希望放置的目录**

- 进入安装目录的上级目录，复制EAS文件夹

  比如EAS客户端，安装在`D:\EAS`（即EAS目录下有`client`目录和`clientjdk`目录），则其上级目录为`D:\`，则复制`EAS`这个目录；

  比如EAS客户端，安装在`D:\Kingdee\EAS86`（即EAS86目录下有`client`目录和`clientjdk`目录），则其上级目录为`D:\Kingdee`，则复制`EAS86`这个目录。

- 粘贴到希望放置的目录下（，并重命名目录）

  如果是放到原安装目录的同一上级目录，即和原安装目录平级，则新粘贴出来的目录称会出现` - 副本`字样，如原来是`EAS`，则新粘贴出来的为`EAS- 副本`，请按需修改为新的目录名称，比如修改为`EAS86`、`EASTest`等，确保没有空格、中文、非字母和数字的字符。

  如果是放到新的上级目录下，即和原安装目录不在同一上级目录下，则新粘贴出来的目录名称和原安装目录名称一致，如原来是`EAS`，由新粘贴出来的肯定也为`EAS`，此时新的目录名称，可改也可不改，确保没有空格、中文、非字母和数字的字符。

**2.修改新粘贴目录下的配置文件**

进入新的安装目录，比如`D:\EASTest`，再进入`\client\bin`，即进入配置文件所在目录

- 找到配置文件`set-client-ent.bat`，参照上述<4>的方法修改路径；

  因安装路径已从`D:\EAS`改为`D:\EASTest`（此处仅为示例，以实际存放的位置为准），此时需要把前两行颜色部分改成`D:\EASTest`；

- 找到配置文件`set-url.bat`，参照上述<5>的方法修改连接配置；

  协议、地址、端口等，会随着管理要求发生变化，在交流群中会第一时间告之，请以最新告之为准。

<!--- 找到执行文件`client.bat`，参照上述<6>的方法修改数值。-->

**3.发送执行文件快捷方式到桌面**

进入新的安装目录，比如`D:\EASTest`，再进入`\client\bin`，进入配置文件所在目录，找到并选中`client.bat`，**右击**，再单击`发送到-桌面快捷方式`，则桌面即刻就有了入口文件的快捷方式，同时请参照本章`6.设置桌面快捷方式`（[点击跳转](#_6-设置桌面快捷方式)），设置快捷方式及图标。

**4.执行入口文件，等待客户端完成更新**

双击桌面快捷方式，即可打开新复制粘贴的EAS客户端，系统会自动更新客户端文件，等待完成，完成后即可正常使用新的EAS客户端。



## 8. 安装系统常见问题

<!--

### 8.1 客户端更新失败的文件列表deploy/client/ctrlhome/webapps/extweb/WEB-INF/web.xml

**问题**：在更新过程中出现类似如下报错信息，导致无法使用金蝶。

:::center

![](/easpublic/easimg/eassetup5.png)

:::

**解决方案**：

- 下载这些文件压缩包，==》[点我下载](../../easpublic/easfile/WEB-INF.rar)

- 得到三个文件：

  WEB-INF\web.xml

  WEB-INF\lib\mobileserver-classloader.jar

  WEB-INF\lib\mobileserver-ext.jar

- 复制到安装目录下的\client\deploy\client\ctrlhome\webapps\extweb文件夹下，确保总路径为：

  \client\deploy\client\ctrlhome\webapps\extweb\WEB-INF\web.xml

  \client\deploy\client\ctrlhome\webapps\extweb\WEB-INF\lib\mobileserver-classloader.jar

  \client\deploy\client\ctrlhome\webapps\extweb\WEB-INF\lib\mobileserver-ext.jar

  参考如下图：（以安装目录为D:\Kingdee\EAS86为例）

  ![](/easpublic/easimg/eassetup6.png)

- 回到安装目录下的`\client`，参考如图所示，删除相应的文件夹、文件。

  ![](/easpublic/easimg/eassetup7.png)

- 重新打开客户端，等待更新完成，一般即可正常使用。

如还不能正常使用，请联系本部。

-->

### 8.1 启动客户端后，总提示更新失败的文件列表

问题：在更新过程中出现类似如下报错信息，导致无法使用金蝶。

:::center

![](/easpublic/easimg/eassetup5.png)

:::

解决方案：

全新安装的客户端，设置好配置文件，启动客户端后，客户端会自动检测是否有可更新的文件。

第一次启动时，因为是全新的，会下载所有需要的文件，请等待完成。以后启动时，只会下载与服务器端不同的文件（一般为少数几个文件）。

但偶尔情况下，启动时，最后几个文件总是会提示`更新失败的文件列表`。

请参考如下方法：

- 1、完成修改配置文件，完成初次启动客户端。

- 2、确保配置文件\client\bin\ `set-url.bat`（选中右击，以管理员身份运行）的内容，按前述`4.1 修改配置文件`中的内容，进行配置。也即：

  > 修改配置文件内容：（以下各项，如有更改，请以最新告之为准）
  >
  > - RPC协议：选择第二个，即：`SSL`；
  > - 服务器地址：修改为告之的地址，即`10.15.11.74`，**地址如有更改，请以另行告之为准**；
  > - 服务器端口：修改为`12033`，**端口如有更改，请以另行告之为准**；
  > - 文件更新服务端口：修改为`8080`，并务必**不要**勾选后面的`HPPTS`，**端口如有更改，请以另行告之为准**；
  > - 虚拟机最大内存，保持不变（如果您的电脑比较快，可以修改为更大，比如768，1024）;
  > - JDK版本：强烈建议选择为`JDK1.8`，但如操作系统是32位时（强烈建议安装为64位，除非是非常老旧的硬件），则请选择`JDK1.6`。

- 3、找到\client\bin\ `regkdeas.bat`，选中右击，以管理员身份运行，系统会自动注册EAS组件，等待出现提示`按任意键退出……`，关闭本窗口。

- 4、注册组件时，可能会修改配置文件的内容，因此，请再次检查配置文件，确保里面的内容符合上述指导的内容。

- 5、下载客户端更新无法下载文件压缩包，[点我下载](../../easpublic/easfile/客户端更新无法下载文件.zip)，放到安装目录下（即与\client\文件夹同级目录），打开压缩包，进入压缩包中的“客户端更新无法下载文件”，把压缩包里的文件夹client，拖到安装目录，直接覆盖文件夹client，这样通过手工的方式，把那些更新失败的文件，进行更新。

  ![](/easpublic/easimg/eassetup8.png)

- 6、再次启动客户端，一般就可以正常更新，直至正常登录客户端。



## 9. 调整客户端兼容性，避免客户端字体异常

该操作，适用于任何方式安装的金蝶EAS客户端。

- 检查配置文件所使用的JAVA版本

  找到`\安装目录\client\bin\set-client-env.bat`，选中右击，点击`编辑`（注意，不是点管理员身份运行），查看`SET JAVA_HOME=`最后面的信息：

  - 如为 `oracle_jdk1.8` ，则进入文件夹`\安装目录\oracle_jdk1.8`。一般应为这个。
  - 如为 `oracle_jdk1.6` ，则进入文件夹`\安装目录\oracle_jdk1.6`。
  - 如为 `clientjdk` ，则进入文件夹`\安装目录\clientjkd`。

  ![](/easpublic/easimg/eassetup9.png)

- 进入相应文件夹后，继续进入 `\bin`，也即`\安装目录\oracle_jdk1.8\bin\`（以上述最后信息为oracle_jdk1.8为例，其他参照）

  分别找到`java.exe`、`javaw.exe`、`javaws.exe`。

- 逐一对这三件文件，进行如下操作

  - 选中该文件，右击，属性，切换到“兼容性”选项卡。
  - 点击最下面的`更改所有用户的设置`，弹出新的窗口
  - 勾选兼容模式中的`以兼容模式运行这个程序：`，并选择`Windows7`
  - 点击最下面的`更改高DPI设置`，又弹出一个窗口
  - 勾选高DPI缩放替代中的`替代高DPI缩放行为`。缩放执行，请务必选择`系统`。
  - 确定，确定，确定，逐层对打开的窗口进行确定，完成兼容性的设置。

  对三个文件，均执行如上操作后，再启动EAS客户端，登录界面或进入的系统界面，就可以正常显示文字大小了。

  ![](/easpublic/easimg/eassetup10.png)

